= Guía de Laboratorio
include::_attributes.adoc[]

[#intslacion]
== Instalación de InstructLab

=== Requisitos del sistema

* Python 3.9+
* 60GB de espacio en disco

=== Instalar el entorno

Accede al directorio de *IntsructLab*. Una vez en él, arranca un entorno virtual e instala la herramienta:

[.console-input]
[source,bash]
----
cd ~/instructlab
source venv/bin/activate
pip install git+https://github.com/instructlab/instructlab.git@v0.17.1
----

Verifica la instalación con el comando `ilab`:

[.console-input]
[source,bash]
----
ilab
----

[#uso-basico]
== Uso básico de IntsructLab

=== Inicializar InstructLab

Inicializa la herramienta:

[.console-input]
[source,bash]
----
ilab config init
----

La salida del comando será la siguiente: 

[.console-output]
[source, console]
----
Found config.yaml in the current directory, do you still want to continue? [y/N]:
----

Confirma el uso de `config.yaml`. Para ello escribe kbd:[y] y presiona kbd:[Enter].

Continua con los valores por defecto pulsando kbd:[Enter].

En caso de recibir la siguiente salida, escribe kbd:[y] y confirma con kbd:[Enter]:

[.console-output]
[source,console]
----
`taxonomy` seems to not exist or is empty. Should I clone https://github.com/instructlab/taxonomy.git for you? [y/N]: 
----

=== Descargar el modelo

Descarga el modelo a usar:

[.console-input]
[source,bash]
----
ilab model download --repository instructlab/granite-7b-lab-GGUF --filename=granite-7b-lab-Q4_K_M.gguf
----

=== Servir el modelo

[.console-input]
[source,bash]
----
ilab model serve --model-path models/granite-7b-lab-Q4_K_M.gguf
----

[#entrenamiento]
== Entrenamiento del Modelo

=== Preparar el entorno para el entrenamiento

[.console-input]
[source,bash]
----
ilab train --dataset synthetic-dataset.json --epochs 3
----

=== Monitoreo del proceso de entrenamiento

El comando anterior inicia el proceso de entrenamiento y puedes observar el progreso en la salida del terminal.

=== Ajuste fino del modelo

Después del entrenamiento inicial, puedes ajustar el modelo usando un nuevo conjunto de datos con el siguiente comando:

[.console-input]
[source,bash]
----
ilab fine-tune --dataset additional-dataset.json --model trained-model.pt
----

[#interaccion]
== Interacción con el Modelo

=== Iniciar una sesión interactiva

Para comenzar una conversación con el modelo entrenado, usa el siguiente comando:

[.console-input]
[source,bash]
----
ilab model chat --model trained-model.pt
----

=== Evaluación de la salida

El modelo responderá en tiempo real a las entradas proporcionadas. Puedes usarlo para probar cómo responde a diferentes tipos de preguntas.

[#despliegue]
== Despliegue del Modelo

=== Preparar el modelo para producción

Una vez entrenado, el modelo debe ser empaquetado para su despliegue. Usa el siguiente comando para empaquetar el modelo:

[.console-input]
[source,bash]
----
ilab package --model trained-model.pt --output model-package.tar.gz
----

=== Desplegar el modelo

El modelo empaquetado puede ser desplegado en servidores compatibles con InstructLab. Sube el archivo comprimido al servidor de producción y usa:

[.console-input]
[source,bash]
----
ilab deploy --package model-package.tar.gz --host production-server
----

